!function(){var t,e={};function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=new((t=function(){var t;function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.board=t||this.createEmptyBoard(),this.score=0,this.status="idle"}return t=[{key:"createEmptyBoard",value:function(){for(var t=[],e=0;e<4;e++)t.push([0,0,0,0]);return t}},{key:"moveLeft",value:function(){for(var t=this,e=this.board.map(function(t){return n(t)}),r=0,o=0;o<this.board.length;o++)!function(e){for(var n=t.board[e].filter(function(t){return 0!==t}),o=[],a=0;a<n.length;)if(n[a]===n[a+1]){var s=2*n[a];o.push(s),r+=s,a+=2}else o.push(n[a]),a+=1;for(;o.length<4;)o.push(0);t.board[e]=o}(o);this.board.some(function(t,r){return t.some(function(t,n){return t!==e[r][n]})})&&(this.addRandomTile(),this.score+=r),this.board.some(function(t){return t.includes(2048)})&&(this.status="win")}},{key:"moveRight",value:function(){for(var t=this,e=this.board.map(function(t){return n(t)}),r=0,o=0;o<this.board.length;o++)!function(e){for(var o=n(t.board[e]).reverse().filter(function(t){return 0!==t}),a=[],s=0;s<o.length;)if(o[s]===o[s+1]){var i=2*o[s];a.push(i),r+=i,s+=2}else a.push(o[s]),s+=1;for(;a.length<4;)a.push(0);t.board[e]=a.reverse()}(o);this.board.some(function(t,r){return t.some(function(t,n){return t!==e[r][n]})})&&(this.addRandomTile(),this.score+=r),this.board.some(function(t){return t.includes(2048)})&&(this.status="win")}},{key:"moveUp",value:function(){for(var t=this,e=this.board.map(function(t){return n(t)}),r=0,o=0;o<4;o++)!function(e){for(var n=[],o=0;o<4;o++)n.push(t.board[o][e]);for(var a=n.filter(function(t){return 0!==t}),s=[],i=0;i<a.length;)if(a[i]===a[i+1]){var u=2*a[i];s.push(u),r+=u,i+=2}else s.push(a[i]),i+=1;for(;s.length<4;)s.push(0);for(var c=0;c<4;c++)t.board[c][e]=s[c]}(o);this.board.some(function(t,r){return t.some(function(t,n){return t!==e[r][n]})})&&(this.addRandomTile(),this.score+=r),this.board.some(function(t){return t.includes(2048)})&&(this.status="win")}},{key:"moveDown",value:function(){for(var t=this,e=this.board.map(function(t){return n(t)}),r=0,o=0;o<4;o++)!function(e){for(var n=[],o=0;o<4;o++)n.push(t.board[o][e]);for(var a=n.filter(function(t){return 0!==t}),s=[],i=a.length-1;i>=0;)if(a[i]===a[i-1]){var u=2*a[i];s.unshift(u),r+=u,i-=2}else s.unshift(a[i]),i-=1;for(;s.length<4;)s.unshift(0);for(var c=0;c<4;c++)t.board[c][e]=s[c]}(o);this.board.some(function(t,r){return t.some(function(t,n){return t!==e[r][n]})})&&(this.addRandomTile(),this.score+=r),this.board.some(function(t){return t.includes(2048)})&&(this.status="win")}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){this.board=this.createEmptyBoard(),this.score=0,this.status="playing",this.addRandomTile(),this.addRandomTile()}},{key:"addRandomTile",value:function(){for(var t=[],e=0;e<4;e++)for(var r=0;r<4;r++)0===this.board[e][r]&&t.push({row:e,col:r});if(t.length>0){var n=Math.floor(Math.random()*t.length),o=t[n],a=o.row,s=o.col,i=.9>Math.random()?2:4;this.board[a][s]=i}}},{key:"isGameOver",value:function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++)if(0===this.board[t][e]||e<3&&this.board[t][e]===this.board[t][e+1]||t<3&&this.board[t][e]===this.board[t+1][e])return!1;return!0}},{key:"restart",value:function(){this.start()}}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,t),e}())&&t.__esModule?t.default:t),a=document.querySelector(".game-field tbody"),s=document.querySelector(".game-score"),i=document.querySelectorAll(".message-container .message"),u=document.querySelector(".message-lose"),c=document.querySelector(".message-win"),d=document.querySelector(".message-start"),l=document.querySelector(".button.start");function f(){a.innerHTML="";for(var t=o.getState(),e=0;e<t.length;e++){var r=document.createElement("tr");r.classList.add("field-row");for(var n=0;n<t[e].length;n++){var f=t[e][n],h=document.createElement("td");h.classList.add("field-cell"),0!==f&&(h.textContent=f,h.classList.add("field-cell--".concat(f))),r.appendChild(h)}a.appendChild(r)}s.textContent=o.getScore();var m=o.getStatus();i.forEach(function(t){return t.classList.add("hidden")}),"win"===m?c.classList.remove("hidden"):"lose"===m?u.classList.remove("hidden"):"idle"===m?(d.classList.remove("hidden"),l.textContent="Start",l.classList.add("start"),l.classList.remove("restart")):"playing"===m&&(l.textContent="Restart",l.classList.remove("start"),l.classList.add("restart"))}f(),document.addEventListener("keydown",function(t){"playing"===o.getStatus()&&("ArrowUp"===t.key?o.moveUp():"ArrowDown"===t.key?o.moveDown():"ArrowRight"===t.key?o.moveRight():"ArrowLeft"===t.key&&o.moveLeft(),o.isGameOver()&&(o.status="lose"),f())}),l.addEventListener("click",function(){o.start(),f(),l.textContent="Restart",l.classList.remove("start"),l.classList.add("restart")})}();
//# sourceMappingURL=index.fa30a8f6.js.map
